(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{357:function(e,t,n){},596:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return qn}));var i=n(1),r=n(0),a=n(20),o=n.n(a),c=(n(357),n(615)),s=n(333),l=n(337),u=n(338),b=n(162),j=n(621),d=n(19),h=n(50),p=n(15),O=n.n(p),f=n(24),m=n(336),g=n(12),v=n(122),x=n(11),y=(n(146),n(7)),w=n(74),C=n.n(w),S=n(38);C.a.defaults.baseURL="/api";var k={headers:{"Content-Type":"application/json; charset=UTF-8","Access-Control-Allow-Origin":"*"}};C.a.interceptors.request.use((function(e){var t=window.localStorage.getItem("jwt");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),C.a.interceptors.response.use(void 0,(function(e){"Network Error"!==e.message||e.response||S.b.error("Network Error - Please, make sure API is running!");var t=e.response,n=t.status,i=t.data,r=t.config,a=t.headers;throw 404===n&&qn.push("/notFound"),401===n&&a["www-authenticate"].includes('Bearer error="invalid_token", error_description="The token expired')&&(window.localStorage.removeItem("jwt"),qn.push("/"),S.b.info("Your session has expired, please login again")),400===n&&"get"===r.method&&i.errors.hasOwnProperty("id")&&qn.push("/notFound"),500===n&&S.b.error("Server error - Please, check the terminal for more info!"),e.response}));var P,A,z,I,R,M,F,D,L,T,N,H,E,U,G,B,q,V,Y,J,W,_,K,Q,X,Z,$,ee,te,ne,ie,re,ae,oe,ce,se,le,ue,be,je,de,he,pe,Oe,fe,me,ge,ve,xe,ye,we,Ce,Se,ke,Pe,Ae,ze,Ie,Re,Me,Fe,De,Le=function(e){return e?e.data:[]},Te=function(e){return C.a.get(e,k).then(Le)},Ne=function(e,t){return C.a.post(e,t,k).then(Le)},He=function(e,t){return C.a.put(e,t,k).then(Le)},Ee=function(e){return C.a.delete(e,k).then(Le)},Ue=function(e,t){var n=new FormData;return n.append("File",t),C.a.post(e,n,{headers:{"Content-type":"multipart/form-data"}}).then(Le)},Ge={list:function(e){return C.a.get("/activities",{params:e}).then(Le)},details:function(e){return Te("/activities/"+e)},create:function(e){return Ne("/activities/",e)},update:function(e){return He("/activities/"+e.id,e)},delete:function(e){return Ee("/activities/".concat(e))},attendee:function(e){return Ne("/activities/".concat(e,"/attend"),{})},unattend:function(e){return Ee("/activities/".concat(e,"/attend"))}},Be={current:function(){return Te("user/")},login:function(e){return Ne("/user/login",e)},register:function(e){return Ne("/user/register",e)}},qe={get:function(e){return Te("/profiles/".concat(e))},uploadPhoto:function(e){return Ue("/photos",e)},setMainPhoto:function(e){return Ne("/photos/".concat(e,"/setMain"),{})},deletePhoto:function(e){return Ee("/photos/".concat(e))},updateProfile:function(e){return He("/profiles",e)},follow:function(e){return Ne("/profiles/".concat(e,"/follow"),{})},unfollow:function(e){return Ee("/profiles/".concat(e,"/follow"))},listFollowings:function(e,t){return Te("/profiles/".concat(e,"/follow?predicate=").concat(t))},listActivities:function(e,t){return Te("/profiles/".concat(e,"/activities?predicate=").concat(t))}},Ve=n(630),Ye=function(e,t){return e.date=new Date(e.date),e.isGoing=e.attendees.some((function(e){return e.username===t.userName})),e.isHost=e.attendees.some((function(e){return e.username===t.userName&&e.isHost})),e},Je=function(e){return{displayName:e.displayName,isHost:!1,username:e.userName,image:e.image}},We=n(248),_e=(P=y.g.ref,A=function(){function e(t){var n=this;Object(h.a)(this,e),this.rootStore=void 0,Object(g.a)(this,"activityRegistry",z,this),Object(g.a)(this,"loadingInitial",I,this),Object(g.a)(this,"activity",R,this),Object(g.a)(this,"submitting",M,this),Object(g.a)(this,"target",F,this),Object(g.a)(this,"loading",D,this),Object(g.a)(this,"hubConnection",L,this),Object(g.a)(this,"activityCount",T,this),Object(g.a)(this,"page",N,this),Object(g.a)(this,"predicate",H,this),Object(g.a)(this,"setPredicate",E,this),Object(g.a)(this,"setPage",U,this),Object(g.a)(this,"createHubConnection",G,this),Object(g.a)(this,"stopHubConnection",B,this),Object(g.a)(this,"addComment",q,this),Object(g.a)(this,"loadActivities",V,this),Object(g.a)(this,"loadActivity",Y,this),Object(g.a)(this,"clearActivity",J,this),this.getActivity=function(e){return n.activityRegistry.get(e)},Object(g.a)(this,"createActivity",W,this),Object(g.a)(this,"deleteActivity",_,this),Object(g.a)(this,"editActivity",K,this),Object(g.a)(this,"openEditForm",Q,this),Object(g.a)(this,"openCreateForm",X,this),Object(g.a)(this,"attendActivity",Z,this),Object(g.a)(this,"cancelAttendance",$,this),Object(y.f)(this),this.rootStore=t,Object(y.h)((function(){return n.predicate.keys()}),(function(){n.page=0,n.activityRegistry.clear(),n.loadActivities()}))}return Object(v.a)(e,[{key:"groupActivitiesByDates",value:function(e){var t=e.sort((function(e,t){return e.date.getTime()-t.date.getTime()}));return Object.entries(t.reduce((function(e,t){var n=t.date.toISOString().split("T")[0];return e[n]=e[n]?[].concat(Object(m.a)(e[n]),[t]):[t],e}),{}))}},{key:"axiosParams",get:function(){var e=new URLSearchParams;return e.append("limit",String(2)),e.append("offset","".concat(this.page?2*this.page:0)),this.predicate.forEach((function(t,n){"startDate"===n?e.append(n,t.toISOString()):e.append(n,t)})),e}},{key:"totalPages",get:function(){return Math.ceil(this.activityCount/2)}},{key:"activitiesByDates",get:function(){return this.groupActivitiesByDates(Array.from(this.activityRegistry.values()))}}]),e}(),z=Object(x.a)(A.prototype,"activityRegistry",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),I=Object(x.a)(A.prototype,"loadingInitial",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=Object(x.a)(A.prototype,"activity",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=Object(x.a)(A.prototype,"submitting",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=Object(x.a)(A.prototype,"target",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),D=Object(x.a)(A.prototype,"loading",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=Object(x.a)(A.prototype,"hubConnection",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=Object(x.a)(A.prototype,"activityCount",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=Object(x.a)(A.prototype,"page",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=Object(x.a)(A.prototype,"predicate",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),E=Object(x.a)(A.prototype,"setPredicate",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){e.predicate.clear(),"all"!==t&&e.predicate.set(t,n)}}}),Object(x.a)(A.prototype,"axiosParams",[y.c],Object.getOwnPropertyDescriptor(A.prototype,"axiosParams"),A.prototype),Object(x.a)(A.prototype,"totalPages",[y.c],Object.getOwnPropertyDescriptor(A.prototype,"totalPages"),A.prototype),U=Object(x.a)(A.prototype,"setPage",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.page=t}}}),G=Object(x.a)(A.prototype,"createHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hubConnection=(new We.a).withUrl("/chat".toString(),{accessTokenFactory:function(){return e.rootStore.commonStore.token}}).configureLogging(We.b.Information).withAutomaticReconnect().build(),"Disconnected"===e.hubConnection.state&&e.hubConnection.start().then((function(){return console.log(e.hubConnection.state)})).then((function(){var n,i;"Connected"===(null===(n=e.hubConnection)||void 0===n?void 0:n.state)&&(console.log("Attempting to join group"),null===(i=e.hubConnection)||void 0===i||i.invoke("AddToGroup",t))})).catch((function(e){return console.log("Error establishing connection: ",e)})),e.hubConnection.on("ReceiveComment",(function(t){Object(y.i)((function(){e.activity.comments.push(t)}))})),e.hubConnection.on("Send",(function(e){S.b.info(e)}))}}}),B=Object(x.a)(A.prototype,"stopHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;"Connected"===(null===(t=e.hubConnection)||void 0===t?void 0:t.state)&&e.hubConnection.invoke("RemoveFromGroup",e.activity.id).then((function(){e.hubConnection.stop()})).then((function(){return console.log("Connection stopped")})).catch((function(e){return console.log("error",e)}))}}}),q=Object(x.a)(A.prototype,"addComment",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(O.a.mark((function t(n){var i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Connected"!==(null===(i=e.hubConnection)||void 0===i?void 0:i.state)){t.next=10;break}return n.activityId=e.activity.id,t.prev=2,t.next=5,e.hubConnection.invoke("SendComment",n);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Object(x.a)(A.prototype,"activitiesByDates",[y.c],Object.getOwnPropertyDescriptor(A.prototype,"activitiesByDates"),A.prototype),V=Object(x.a)(A.prototype,"loadActivities",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(f.a)(O.a.mark((function t(){var n,i,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingInitial=!0,t.prev=1,t.next=4,Ge.list(e.axiosParams);case 4:n=t.sent,i=n.activities,r=n.activityCount,Object(y.i)((function(){i.forEach((function(t){Ye(t,e.rootStore.userStore.user),e.activityRegistry.set(t.id,t)})),e.activityCount=r,e.loadingInitial=!1})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),Object(y.i)((function(){e.loadingInitial=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))}}),Y=Object(x.a)(A.prototype,"loadActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(O.a.mark((function t(n){var i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=e.getActivity(n))){t.next=6;break}return e.activity=i,t.abrupt("return",i);case 6:return e.loadingInitial=!0,t.prev=7,t.next=10,Ge.details(n);case 10:return i=t.sent,Object(y.i)((function(){e.activity=Ye(i,e.rootStore.userStore.user),e.activityRegistry.set(i.id,i),e.loadingInitial=!1})),t.abrupt("return",i);case 15:t.prev=15,t.t0=t.catch(7),Object(y.i)((function(){e.loadingInitial=!1}));case 18:case"end":return t.stop()}}),t,null,[[7,15]])})));return function(e){return t.apply(this,arguments)}}()}}),J=Object(x.a)(A.prototype,"clearActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.activity=null}}}),W=Object(x.a)(A.prototype,"createActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(O.a.mark((function t(n){var i,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submitting=!0,t.prev=1,n.id=Object(Ve.a)(),t.next=5,Ge.create(n);case 5:(i=Je(e.rootStore.userStore.user)).isHost=!0,(r=[]).push(i),n.attendees=r,n.comments=[],n.isHost=!0,Object(y.i)((function(){e.activityRegistry.set(n.id,n),e.submitting=!1})),qn.push("/activities/".concat(n.id)),t.next=21;break;case 16:t.prev=16,t.t0=t.catch(1),Object(y.i)((function(){e.submitting=!1})),S.b.error("Problem submitting data"),console.log(t.t0.response);case 21:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}}),_=Object(x.a)(A.prototype,"deleteActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(O.a.mark((function t(n,i){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submitting=!0,t.prev=1,e.target=n.currentTarget.name,t.next=5,Ge.delete(i);case 5:Object(y.i)((function(){e.activityRegistry.delete(i),e.submitting=!1,e.target="",e.activity=null})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),Object(y.i)((function(){e.submitting=!1,e.target="",e.activity=null})),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()}}),K=Object(x.a)(A.prototype,"editActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submitting=!0,t.prev=1,t.next=4,Ge.update(n);case 4:Object(y.i)((function(){e.activityRegistry.set(n.id,n),e.activity=n,e.submitting=!1})),qn.push("/activities/".concat(n.id)),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),Object(y.i)((function(){e.submitting=!1})),S.b.error("Problem submitting data"),console.log(t.t0.response);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),Q=Object(x.a)(A.prototype,"openEditForm",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.activity=e.activityRegistry.get(t)}}}),X=Object(x.a)(A.prototype,"openCreateForm",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.activity=null}}}),Z=Object(x.a)(A.prototype,"attendActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(f.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Je(e.rootStore.userStore.user),e.loading=!0,t.prev=2,t.next=5,Ge.attendee(e.activity.id);case 5:Object(y.i)((function(){e.activity&&(e.activity.attendees.push(n),e.activity.isGoing=!0,e.activityRegistry.set(e.activity.id,e.activity),e.loading=!1)})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),Object(y.i)((function(){e.loading=!1})),S.b.error("Problem signing up to activity");case 12:case"end":return t.stop()}}),t,null,[[2,8]])})))}}),$=Object(x.a)(A.prototype,"cancelAttendance",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(f.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Ge.unattend(e.activity.id);case 4:Object(y.i)((function(){e.activity&&(e.activity.attendees=e.activity.attendees.filter((function(t){return t.username!==e.rootStore.userStore.user.userName})),e.activity.isGoing=!1,e.activityRegistry.set(e.activity.id,e.activity),e.loading=!1)})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),Object(y.i)((function(){e.loading=!1})),S.b.error("Problem canceling attendence");case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))}}),A),Ke=(ee=function(){function e(t){Object(h.a)(this,e),this.rootStore=void 0,Object(g.a)(this,"user",te,this),Object(g.a)(this,"login",ne,this),Object(g.a)(this,"register",ie,this),Object(g.a)(this,"getUser",re,this),Object(g.a)(this,"logout",ae,this),Object(y.f)(this),this.rootStore=t}return Object(v.a)(e,[{key:"isLoggedIn",get:function(){return!!this.user}}]),e}(),te=Object(x.a)(ee.prototype,"user",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(x.a)(ee.prototype,"isLoggedIn",[y.c],Object.getOwnPropertyDescriptor(ee.prototype,"isLoggedIn"),ee.prototype),ne=Object(x.a)(ee.prototype,"login",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(O.a.mark((function t(n){var i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Be.login(n);case 3:i=t.sent,Object(y.i)((function(){e.user=i})),e.rootStore.commonStore.setToken(i.token),qn.push("/activities"),e.rootStore.modalStore.closeModal(),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}}),ie=Object(x.a)(ee.prototype,"register",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(O.a.mark((function t(n){var i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Be.register(n);case 3:i=t.sent,Object(y.i)((function(){e.user=i})),e.rootStore.commonStore.setToken(i.token),e.rootStore.modalStore.closeModal(),qn.push("/activities"),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}}),re=Object(x.a)(ee.prototype,"getUser",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(f.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Be.current();case 3:n=t.sent,Object(y.i)((function(){e.user=n})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))}}),ae=Object(x.a)(ee.prototype,"logout",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(f.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.rootStore.commonStore.setToken(null),e.user=null,qn.push("/");case 3:case"end":return t.stop()}}),t)})))}}),ee),Qe=(oe=function e(t){var n=this;Object(h.a)(this,e),this.rootStore=void 0,Object(g.a)(this,"token",ce,this),Object(g.a)(this,"appLoaded",se,this),Object(g.a)(this,"setToken",le,this),Object(g.a)(this,"setAppLoaded",ue,this),Object(y.f)(this),this.rootStore=t,Object(y.h)((function(){return n.token}),(function(e){e?window.localStorage.setItem("jwt",e):window.localStorage.removeItem("jwt")}))},ce=Object(x.a)(oe.prototype,"token",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.localStorage.getItem("jwt")}}),se=Object(x.a)(oe.prototype,"appLoaded",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),le=Object(x.a)(oe.prototype,"setToken",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.token=t}}}),ue=Object(x.a)(oe.prototype,"setAppLoaded",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.appLoaded=!0}}}),oe),Xe=(be=y.g.shallow,je=function e(t){Object(h.a)(this,e),this.rootStore=void 0,Object(g.a)(this,"modal",de,this),Object(g.a)(this,"openModal",he,this),Object(g.a)(this,"closeModal",pe,this),Object(y.f)(this),this.rootStore=t},de=Object(x.a)(je.prototype,"modal",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{open:!1,body:null}}}),he=Object(x.a)(je.prototype,"openModal",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.modal.open=!0,e.modal.body=t}}}),pe=Object(x.a)(je.prototype,"closeModal",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.modal.open=!1,e.modal.body=null}}}),je),Ze=(Oe=function(){function e(t){var n=this;Object(h.a)(this,e),this.rootStore=void 0,Object(g.a)(this,"profile",fe,this),Object(g.a)(this,"loadingProfile",me,this),Object(g.a)(this,"uploadingPhoto",ge,this),Object(g.a)(this,"loading",ve,this),Object(g.a)(this,"followings",xe,this),Object(g.a)(this,"activeTab",ye,this),Object(g.a)(this,"userActivities",we,this),Object(g.a)(this,"loadingActivities",Ce,this),Object(g.a)(this,"loadUserActivities",Se,this),Object(g.a)(this,"setActiveTab",ke,this),Object(g.a)(this,"loadProfile",Pe,this),Object(g.a)(this,"updateProfile",Ae,this),Object(g.a)(this,"uploadPhoto",ze,this),Object(g.a)(this,"setMainPhoto",Ie,this),Object(g.a)(this,"deletePhoto",Re,this),Object(g.a)(this,"follow",Me,this),Object(g.a)(this,"unfollow",Fe,this),Object(g.a)(this,"loadFollowings",De,this),Object(y.f)(this),this.rootStore=t,Object(y.h)((function(){return n.activeTab}),(function(e){if(3===e||4===e){var t=3===e?"followers":"following";n.loadFollowings(t)}else n.followings=[]}))}return Object(v.a)(e,[{key:"isCurrentUser",get:function(){return!(!this.rootStore.userStore.user||!this.profile)&&this.rootStore.userStore.user.userName===this.profile.userName}}]),e}(),fe=Object(x.a)(Oe.prototype,"profile",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=Object(x.a)(Oe.prototype,"loadingProfile",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ge=Object(x.a)(Oe.prototype,"uploadingPhoto",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ve=Object(x.a)(Oe.prototype,"loading",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xe=Object(x.a)(Oe.prototype,"followings",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ye=Object(x.a)(Oe.prototype,"activeTab",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),we=Object(x.a)(Oe.prototype,"userActivities",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ce=Object(x.a)(Oe.prototype,"loadingActivities",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(x.a)(Oe.prototype,"isCurrentUser",[y.c],Object.getOwnPropertyDescriptor(Oe.prototype,"isCurrentUser"),Oe.prototype),Se=Object(x.a)(Oe.prototype,"loadUserActivities",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(O.a.mark((function t(n,i){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingActivities=!0,t.prev=1,t.next=4,qe.listActivities(n,i);case 4:r=t.sent,Object(y.i)((function(){e.userActivities=r,e.loadingActivities=!1})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),S.b.error("Problem loading activities"),Object(y.i)((function(){e.loadingActivities=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()}}),ke=Object(x.a)(Oe.prototype,"setActiveTab",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.activeTab=t}}}),Pe=Object(x.a)(Oe.prototype,"loadProfile",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(O.a.mark((function t(n){var i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingProfile=!0,t.prev=1,t.next=4,qe.get(n);case 4:i=t.sent,Object(y.i)((function(){e.profile=i,e.loadingProfile=!1})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),e.loadingProfile=!1,console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),Ae=Object(x.a)(Oe.prototype,"updateProfile",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(O.a.mark((function t(n){var i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n.displayName),t.prev=1,t.next=4,qe.updateProfile(n);case 4:i=t.sent,Object(y.i)((function(){e.profile=i,e.rootStore.userStore.user.displayName=i.displayName})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),S.b.error("Problems to update profile");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),ze=Object(x.a)(Oe.prototype,"uploadPhoto",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(O.a.mark((function t(n){var i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.uploadingPhoto=!0,t.prev=1,t.next=4,qe.uploadPhoto(n);case 4:i=t.sent,Object(y.i)((function(){e.profile&&(e.profile.photos.push(i),i.isMain&&e.rootStore.userStore.user&&(e.rootStore.userStore.user.image=i.url,e.profile.image=i.url)),e.uploadingPhoto=!1})),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0),S.b.error("Problem uploading photo"),Object(y.i)((function(){e.uploadingPhoto=!1}));case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),Ie=Object(x.a)(Oe.prototype,"setMainPhoto",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,qe.setMainPhoto(n.id);case 4:Object(y.i)((function(){e.rootStore.userStore.user.image=n.url,e.profile.photos.find((function(e){return e.isMain})).isMain=!1,e.profile.photos.find((function(e){return e.id===n.id})).isMain=!0,e.profile.image=n.url,e.loading=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),S.b.error("Problem setting photo as main"),Object(y.i)((function(){e.loading=!1}));case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Re=Object(x.a)(Oe.prototype,"deletePhoto",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,qe.deletePhoto(n.id);case 4:Object(y.i)((function(){e.profile.photos=e.profile.photos.filter((function(e){return e.id!==n.id})),e.loading=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),S.b.error("Problem deleting the photo"),Object(y.i)((function(){e.loading=!1}));case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Me=Object(x.a)(Oe.prototype,"follow",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,qe.follow(n);case 4:Object(y.i)((function(){e.profile.following=!0,e.profile.followersCount++,e.loading=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),console.log("problem following user"),Object(y.i)((function(){e.loading=!1}));case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Fe=Object(x.a)(Oe.prototype,"unfollow",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,qe.unfollow(n);case 4:Object(y.i)((function(){e.profile.following=!1,e.profile.followersCount--,e.loading=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),console.log("problem unfollowing user"),Object(y.i)((function(){e.loading=!1}));case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),De=Object(x.a)(Oe.prototype,"loadFollowings",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(O.a.mark((function t(n){var i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,qe.listFollowings(e.profile.userName,n);case 4:i=t.sent,Object(y.i)((function(){e.followings=i,e.loading=!1})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),S.b.error("Problem loading followings"),Object(y.i)((function(){e.loading=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),Oe);Object(y.d)({enforceActions:"always"});var $e=Object(r.createContext)(new function e(){Object(h.a)(this,e),this.activityStore=void 0,this.userStore=void 0,this.commonStore=void 0,this.modalStore=void 0,this.profileStore=void 0,this.activityStore=new _e(this),this.userStore=new Ke(this),this.commonStore=new Qe(this),this.modalStore=new Xe(this),this.profileStore=new Ze(this)}),et=Object(j.a)((function(){var e=Object(r.useContext)($e),t=e.userStore,n=t.user,a=t.logout;return Object(i.jsx)(s.a,{fixed:"top",inverted:!0,children:Object(i.jsxs)(c.a,{children:[Object(i.jsxs)(s.a.Item,{header:!0,as:d.b,exact:!0,to:"/",children:[Object(i.jsx)("img",{src:"/assets/logo.png",alt:"logo",style:{marginRight:"10px"}}),"Reactivities"]}),Object(i.jsx)(s.a.Item,{name:"Activities",as:d.b,to:"/activities"}),Object(i.jsx)(s.a.Item,{children:Object(i.jsx)(l.a,{onClick:e.activityStore.openCreateForm,type:"button",positive:!0,as:d.b,to:"/createActivity",content:"Create Activity"})}),n&&Object(i.jsxs)(s.a.Item,{position:"right",children:[Object(i.jsx)(u.a,{avatar:!0,spaced:"right",src:n.image||"/assets/user.png"}),Object(i.jsx)(b.a,{pointing:"top left",text:n.displayName,children:Object(i.jsxs)(b.a.Menu,{children:[Object(i.jsx)(b.a.Item,{as:d.a,to:"/profile/".concat(n.userName),text:"My profile",icon:"user"}),Object(i.jsx)(b.a.Item,{text:"Logout",icon:"power",onClick:a})]})})]})]})})})),tt=n(28),nt=n(249),it=n(634),rt=n(91),at=n(21),ot=n(622),ct=n(30),st=n(45),lt=n(160),ut=function(e){var t=e.input,n=e.width,r=e.placeholder,a=e.meta,o=a.touched,c=a.error;return Object(i.jsxs)(st.a,{error:o&&!!c,children:[Object(i.jsx)("input",Object(ct.a)(Object(ct.a)({},t),{},{placeholder:r,width:n})),Object(i.jsx)("br",{}),o&&c&&Object(i.jsx)(lt.a,{basic:!0,color:"red",children:c})]})},bt=n(66),jt=n(23),dt=n(628),ht=function(e){var t=e.error,n=e.text;return Object(i.jsxs)(dt.a,{error:!0,children:[Object(i.jsx)(dt.a.Header,{children:t.statusText}),t&&t.data&&Object.keys(t.data.errors).length>0&&Object(i.jsx)(dt.a.List,{children:Object.values(t.data.errors).flat().map((function(e,t){return Object(i.jsx)(dt.a.Item,{children:e},t)}))}),n&&Object(i.jsx)(dt.a.Content,{content:n})]})},pt=Object(jt.combineValidators)({email:Object(jt.isRequired)("email"),password:Object(jt.isRequired)("password")}),Ot=function(){var e=Object(r.useContext)($e).userStore.login;return Object(i.jsx)(at.b,{onSubmit:function(t){return e(t).catch((function(e){return Object(rt.a)({},bt.a,e)}))},validate:pt,render:function(e){var t=e.handleSubmit,n=e.submitting,r=(e.form,e.submitError),a=e.invalid,o=e.pristine,c=e.dirtySinceLastSubmit;return Object(i.jsxs)(ot.a,{onSubmit:t,error:!0,children:[Object(i.jsx)(it.a,{as:"h2",content:"Login to Reactivities",color:"teal",textAlign:"center"}),Object(i.jsx)(at.a,{name:"email",component:ut,placeholder:"Email"}),Object(i.jsx)(at.a,{name:"password",type:"password",component:ut,placeholder:"Password"}),r&&!c&&Object(i.jsx)(ht,{error:r,text:"Invalid email or password"}),Object(i.jsx)(l.a,{disabled:a&&!c||o,loading:n,color:"teal",content:"Login",fluid:!0})]})}})},ft=Object(jt.combineValidators)({username:Object(jt.isRequired)("username"),displayname:Object(jt.isRequired)("displayname"),email:Object(jt.isRequired)("email"),password:Object(jt.isRequired)("password")}),mt=function(){var e=Object(r.useContext)($e).userStore.register;return Object(i.jsx)(at.b,{onSubmit:function(t){return e(t).catch((function(e){return Object(rt.a)({},bt.a,e)}))},validate:ft,render:function(e){var t=e.handleSubmit,n=e.submitting,r=(e.form,e.submitError),a=e.invalid,o=e.pristine,c=e.dirtySinceLastSubmit;return Object(i.jsxs)(ot.a,{onSubmit:t,error:!0,children:[Object(i.jsx)(it.a,{as:"h2",content:"Login to Reactivities",color:"teal",textAlign:"center"}),Object(i.jsx)(at.a,{name:"username",component:ut,placeholder:"Username"}),Object(i.jsx)(at.a,{name:"displayname",component:ut,placeholder:"Display Name"}),Object(i.jsx)(at.a,{name:"email",component:ut,placeholder:"Email"}),Object(i.jsx)(at.a,{name:"password",type:"password",component:ut,placeholder:"Password"}),r&&!c&&Object(i.jsx)(ht,{error:r}),Object(i.jsx)(l.a,{disabled:a&&!c||o,loading:n,color:"teal",content:"Login",fluid:!0})]})}})},gt=function(){var e=window.localStorage.getItem("jwt"),t=Object(r.useContext)($e),n=t.userStore,a=n.isLoggedIn,o=n.user,s=t.modalStore.openModal;return Object(i.jsx)(nt.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead",children:Object(i.jsxs)(c.a,{text:!0,children:[Object(i.jsxs)(it.a,{as:"h1",inverted:!0,children:[Object(i.jsx)(u.a,{size:"massive",src:"/assets/logo.png",alt:"logo",style:{marginBottom:12}}),"Reactivities"]}),a&&o&&e?Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(it.a,{as:"h2",inverted:!0,content:"Welcome back ".concat(o.displayName)}),Object(i.jsx)(l.a,{as:d.a,to:"/activities",size:"huge",inverted:!0,children:"Go to activities!"})]}):Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(it.a,{as:"h2",inverted:!0,content:"Welcome to Reactivities"}),Object(i.jsx)(l.a,{onClick:function(){return s(Object(i.jsx)(Ot,{}))},to:"/login",size:"huge",inverted:!0,children:"Login"}),Object(i.jsx)(l.a,{onClick:function(){return s(Object(i.jsx)(mt,{}))},size:"huge",inverted:!0,children:"Register"})]})]})})},vt=n(46),xt=n(339),yt=n(624),wt=n(617),Ct=n(334),St=n(326),kt=n(98),Pt=n(620),At=n(619),zt={borderColor:"orange",borderWidth:2},It=function(e){var t=e.attendees;return Object(i.jsx)(yt.a,{horizontal:!0,children:t.map((function(e){return Object(i.jsx)(yt.a.Item,{children:Object(i.jsx)(At.a,{header:e.displayName,trigger:Object(i.jsx)(u.a,{bordered:!0,style:e.following?zt:null,size:"mini",circular:!0,src:e.image||"/assets/user.png"})})},e.username)}))})},Rt=function(e){var t=e.activity,n=Object(r.useContext)($e).activityStore,a=n.submitting,o=n.deleteActivity,c=n.target,s=t.attendees.filter((function(e){return e.isHost}))[0];return Object(i.jsxs)(nt.a.Group,{children:[Object(i.jsx)(nt.a,{children:Object(i.jsx)(St.a,{children:Object(i.jsxs)(Ct.a,{children:[Object(i.jsx)(Ct.a.Image,{size:"tiny",circular:!0,src:s.image||"/assets/user.png",style:{marginBottom:3}}),Object(i.jsxs)(Ct.a.Content,{children:[Object(i.jsx)(Ct.a.Header,{as:d.a,to:"/activities/".concat(t.id),children:t.title}),Object(i.jsxs)(Ct.a.Description,{children:["Hosted by ",Object(i.jsx)(d.a,{to:"profile/".concat(s.username),children:s.displayName})]}),t.isHost&&Object(i.jsx)(Ct.a.Description,{children:Object(i.jsx)(lt.a,{basic:!0,color:"orange",content:"You are hosting this activity"})}),t.isGoing&&!t.isHost&&Object(i.jsx)(Ct.a.Description,{children:Object(i.jsx)(lt.a,{color:"green",content:"You are going to this activity"})})]})]})})}),Object(i.jsxs)(nt.a,{children:[Object(i.jsx)(kt.a,{name:"clock"})," ",Object(Pt.a)(t.date,"h:mm a"),Object(i.jsx)(kt.a,{name:"marker"})," ",t.venue,", ",t.city]}),Object(i.jsx)(nt.a,{secondary:!0,children:Object(i.jsx)(It,{attendees:t.attendees})}),Object(i.jsxs)(nt.a,{clearing:!0,children:[Object(i.jsx)("span",{children:t.description}),Object(i.jsx)(l.a,{as:d.a,to:"/activities/".concat(null===t||void 0===t?void 0:t.id),floated:"right",type:"button",content:"View",color:"blue"}),Object(i.jsx)(l.a,{name:t.id,loading:c===t.id&&a,onClick:function(e){return o(e,t.id)},floated:"right",type:"button",content:"Delete",color:"red"})]})]})},Mt=Object(j.a)((function(){var e=Object(r.useContext)($e).activityStore.activitiesByDates;return Object(i.jsx)(r.Fragment,{children:e.map((function(e){var t=Object(vt.a)(e,2),n=t[0],a=t[1];return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(lt.a,{size:"large",color:"blue",children:Object(Pt.a)(n,"eeee do MMMM")}),Object(i.jsx)(Ct.a.Group,{divided:!0,children:a.map((function(e){return Object(i.jsx)(Rt,{activity:e},e.id)}))})]},n)}))})})),Ft=n(327),Dt=n.n(Ft),Lt=n(206),Tt=Object(j.a)((function(){var e=Object(r.useContext)($e).activityStore,t=e.predicate,n=e.setPredicate;return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsxs)(s.a,{vertical:!0,size:"large",style:{width:"100%",marginTop:50},children:[Object(i.jsx)(it.a,{icon:"filter",attached:!0,color:"teal",content:"Filters"}),Object(i.jsx)(s.a.Item,{active:0===t.size,color:"blue",name:"all",content:"All Activities",onClick:function(){return n("all","true")}}),Object(i.jsx)(s.a.Item,{active:t.has("isGoing"),onClick:function(){return n("isGoing","true")},color:"blue",name:"username",content:"I'm Going"}),Object(i.jsx)(s.a.Item,{active:t.has("isHost"),onClick:function(){return n("isHost","true")},color:"blue",name:"host",content:"I'm hosting"})]}),Object(i.jsx)(it.a,{icon:"calendar",attached:!0,color:"teal",content:"Select Date"}),Object(i.jsx)(Lt.Calendar,{onChange:function(e){return n("startDate",e)},value:t.get("startDate")||new Date})]})})),Nt=n(629),Ht=function(){return Object(i.jsx)(r.Fragment,{children:Object(i.jsx)(Nt.a,{fluid:!0,style:{marginTop:50},children:Object(i.jsxs)(nt.a.Group,{children:[Object(i.jsx)(nt.a,{style:{minHeight:110},children:Object(i.jsxs)(Nt.a,{children:[Object(i.jsxs)(Nt.a.Header,{image:!0,children:[Object(i.jsx)(Nt.a.Line,{}),Object(i.jsx)(Nt.a.Line,{})]}),Object(i.jsx)(Nt.a.Paragraph,{children:Object(i.jsx)(Nt.a.Line,{})})]})}),Object(i.jsx)(nt.a,{children:Object(i.jsxs)(Nt.a,{children:[Object(i.jsx)(Nt.a.Line,{}),Object(i.jsx)(Nt.a.Line,{})]})}),Object(i.jsx)(nt.a,{secondary:!0,style:{minHeight:70}}),Object(i.jsx)(nt.a,{clearing:!0,children:Object(i.jsx)(l.a,{disabled:!0,color:"blue",floated:"right",content:"View"})})]})})})},Et=Object(j.a)((function(){var e=Object(r.useContext)($e).activityStore,t=e.loadActivities,n=e.loadingInitial,a=e.setPage,o=e.totalPages,c=e.page,s=Object(r.useState)(!1),l=Object(vt.a)(s,2),u=l[0],b=l[1];return Object(r.useEffect)((function(){t()}),[t]),Object(i.jsxs)(xt.a,{children:[Object(i.jsx)(xt.a.Column,{width:10,children:Object(i.jsx)(yt.a,{children:n&&0===c?Object(i.jsx)(Ht,{}):Object(i.jsx)(Dt.a,{pageStart:0,loadMore:function(){b(!0),a(c+1),t().then((function(){return b(!1)}))},hasMore:!u&&c+1<o,initialLoad:!1,children:Object(i.jsx)(Mt,{})})})}),Object(i.jsx)(xt.a.Column,{width:6,children:Object(i.jsx)(Tt,{})}),Object(i.jsx)(xt.a.Column,{width:10,children:Object(i.jsx)(wt.a,{active:u})})]})})),Ut=n(134),Gt=n(142),Bt=n(324),qt=function e(t){Object(h.a)(this,e),this.id="",this.title="",this.category="",this.description="",this.date=void 0,this.time=void 0,this.city="",this.venue="",t&&t.date&&(t.time=t.date),Object.assign(this,t)},Vt=function(e){var t=e.input,n=e.rows,r=e.placeholder,a=e.meta,o=a.touched,c=a.error;return Object(i.jsxs)(st.a,{error:o&&!!c,children:[Object(i.jsx)("textarea",Object(ct.a)(Object(ct.a)({},t),{},{rows:n,placeholder:r})),o&&c&&Object(i.jsx)(lt.a,{basic:!0,color:"red",children:c})]})},Yt=n(616),Jt=function(e){var t=e.input,n=e.options,r=e.placeholder,a=e.meta,o=a.touched,c=a.error;return Object(i.jsxs)(st.a,{error:o&&!!c,children:[Object(i.jsx)(Yt.a,{value:t.value,onChange:function(e,n){return t.onChange(n.value)},placeholder:r,options:n}),o&&c&&Object(i.jsx)(lt.a,{basic:!0,color:"red",children:c})]})},Wt=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}],_t=function(e){var t=e.input,n=e.placeholder,r=e.date,a=void 0!==r&&r,o=e.time,c=void 0!==o&&o,s=e.meta,l=s.touched,u=s.error,b=(e.id,Object(Ut.a)(e,["input","placeholder","date","time","meta","id"]));return Object(i.jsxs)(st.a,{error:l&&!!u,children:[Object(i.jsx)(Lt.DateTimePicker,Object(ct.a)({placeholder:n,value:t.value||null,onChange:t.onChange,onBlur:t.onBlur,onKeyDown:function(e){return e.preventDefault()},date:a,time:c},b)),l&&u&&Object(i.jsx)(lt.a,{basic:!0,color:"red",children:u})]})},Kt=Object(jt.combineValidators)({title:Object(jt.isRequired)({message:"The event"}),category:Object(jt.isRequired)("Category"),description:Object(jt.composeValidators)(Object(jt.isRequired)("Description"),Object(jt.hasLengthGreaterThan)(4)({message:"Description needs to be at least 5 characters"}))(),city:Object(jt.isRequired)("City"),venue:Object(jt.isRequired)("Venue"),date:Object(jt.isRequired)("Date"),time:Object(jt.isRequired)("Time")}),Qt=Object(j.a)((function(e){var t=e.match,n=e.history,a=Object(r.useContext)($e).activityStore,o=a.submitting,c=a.loadActivity,s=a.createActivity,u=a.editActivity,b=Object(r.useState)(new qt),j=Object(vt.a)(b,2),d=j[0],h=j[1],p=Object(r.useState)(!1),O=Object(vt.a)(p,2),f=O[0],m=O[1];Object(r.useEffect)((function(){t.params.id&&(m(!0),c(t.params.id).then((function(e){return h(new qt(e))})).finally((function(){return m(!1)})))}),[c,t.params.id]);return Object(i.jsx)(xt.a,{children:Object(i.jsx)(Gt.a,{width:10,children:Object(i.jsx)(nt.a,{clearing:!0,children:Object(i.jsx)(at.b,{initialValues:d,validate:Kt,onSubmit:function(e){var t=function(e,t){var n=t.getHours()+":"+t.getMinutes()+":00",i=e.getFullYear(),r=e.getMonth()+1,a=e.getDate(),o="".concat(i,"-").concat(r,"-").concat(a);return new Date(o+" "+n)}(e.date,e.time),n=(e.date,e.time,Object(Ut.a)(e,["date","time"]));if(n.date=t,n.id)u(n);else{var i=Object(ct.a)(Object(ct.a)({},n),{},{id:n.id});s(i)}},render:function(e){var t=e.handleSubmit,r=e.invalid,a=e.pristine;return Object(i.jsxs)(ot.a,{onSubmit:t,loading:f,children:[Object(i.jsx)(at.a,{name:"title",value:d.title,placeholder:"Title",component:ut}),Object(i.jsx)(at.a,{value:d.description,name:"description",rows:3,placeholder:"Description",component:Vt}),Object(i.jsx)(at.a,{name:"category",value:d.category,placeholder:"Category",component:Jt,options:Wt}),Object(i.jsxs)(Bt.a,{widths:"equal",children:[Object(i.jsx)(at.a,{name:"date",placeholder:"Date",value:d.date,component:_t,date:!0}),Object(i.jsx)(at.a,{name:"time",time:!0,placeholder:"Time",value:d.date,component:_t})]}),Object(i.jsx)(at.a,{name:"city",value:d.city,placeholder:"City",component:ut}),Object(i.jsx)(at.a,{name:"venue",value:d.venue,placeholder:"Venue",component:ut}),Object(i.jsx)(l.a,{loading:o,disabled:f||r||a,floated:"right",positive:!0,type:"submit",content:"Submit"}),Object(i.jsx)(l.a,{onClick:d.id?function(){return n.push("/activities/".concat(d.id))}:function(){return n.push("/activities")},floated:"right",disabled:f,type:"button",content:"Cancel"})]})}})})})})})),Xt=n(632),Zt=function(e){var t=e.inverted,n=void 0===t||t,r=e.content;return Object(i.jsx)(Xt.a,{active:!0,inverted:n,children:Object(i.jsx)(wt.a,{content:r})})},$t={filter:"brightness(30%)"},en={position:"absolute",bottom:"5%",left:"5%",width:"100%",height:"auto",color:"white"},tn=Object(j.a)((function(e){var t=e.activity,n=Object(r.useContext)($e).activityStore,a=n.attendActivity,o=n.cancelAttendance,c=n.loading,s=t.attendees.filter((function(e){return e.isHost}))[0];return Object(i.jsxs)(nt.a.Group,{children:[Object(i.jsxs)(nt.a,{basic:!0,attached:"top",style:{padding:"0"},children:[Object(i.jsx)(u.a,{src:"/assets/categoryImages/".concat(t.category,".jpg"),fluid:!0,style:$t}),Object(i.jsx)(nt.a,{basic:!0,style:en,children:Object(i.jsx)(Ct.a.Group,{children:Object(i.jsx)(Ct.a,{children:Object(i.jsxs)(Ct.a.Content,{children:[Object(i.jsx)(it.a,{size:"huge",content:t.title,style:{color:"white"}}),Object(i.jsx)("p",{children:Object(Pt.a)(t.date,"eeee do MMMM")}),Object(i.jsxs)("p",{children:["Hosted by ",Object(i.jsx)(d.a,{to:"profile/".concat(s.username),children:Object(i.jsx)("strong",{children:s.displayName})})]})]})})})})]}),Object(i.jsx)(nt.a,{clearing:!0,attached:"bottom",children:t.isHost?Object(i.jsx)(l.a,{as:d.a,to:"/manage/".concat(t.id),color:"orange",floated:"right",children:"Manage Event"}):t.isGoing?Object(i.jsx)(l.a,{loading:c,onClick:o,children:"Cancel attendance"}):Object(i.jsx)(l.a,{loading:c,onClick:a,color:"teal",children:"Join Activity"})})]})})),nn=Object(j.a)((function(e){var t=e.activity;return Object(i.jsx)("div",{children:Object(i.jsxs)(nt.a.Group,{children:[Object(i.jsx)(nt.a,{attached:"top",children:Object(i.jsxs)(xt.a,{children:[Object(i.jsx)(xt.a.Column,{width:1,children:Object(i.jsx)(kt.a,{size:"large",color:"teal",name:"info"})}),Object(i.jsx)(xt.a.Column,{width:15,children:Object(i.jsx)("p",{children:t.description})})]})}),Object(i.jsx)(nt.a,{attached:!0,children:Object(i.jsxs)(xt.a,{verticalAlign:"middle",children:[Object(i.jsx)(xt.a.Column,{width:1,children:Object(i.jsx)(kt.a,{name:"calendar",size:"large",color:"teal"})}),Object(i.jsx)(xt.a.Column,{width:15,children:Object(i.jsxs)("span",{children:[Object(Pt.a)(t.date,"eeee do MMMM")," at ",Object(Pt.a)(t.date,"h:mm a")]})})]})}),Object(i.jsx)(nt.a,{attached:!0,children:Object(i.jsxs)(xt.a,{verticalAlign:"middle",children:[Object(i.jsx)(xt.a.Column,{width:1,children:Object(i.jsx)(kt.a,{name:"marker",size:"large",color:"teal"})}),Object(i.jsx)(xt.a.Column,{width:11,children:Object(i.jsxs)("span",{children:[t.venue,", ",t.city]})})]})})]})})})),rn=n(328),an=n(623),on=n(626),cn=Object(j.a)((function(){var e=Object(r.useContext)($e).activityStore,t=e.createHubConnection,n=e.stopHubConnection,a=e.addComment,o=e.activity;return Object(r.useEffect)((function(){return t(o.id),function(){n()}}),[t,n,o]),Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(nt.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"},children:Object(i.jsx)(it.a,{children:"Chat about this event"})}),Object(i.jsx)(nt.a,{attached:!0,children:Object(i.jsxs)(rn.a,{children:[o&&o.comments&&o.comments.map((function(e){return Object(i.jsxs)(an.a,{children:[Object(i.jsx)(an.a.Avatar,{src:e.image||"/assets/user.png"}),Object(i.jsxs)(an.a.Content,{children:[Object(i.jsx)(an.a.Author,{as:d.a,to:"/profile/".concat(e.username),children:e.displayName}),Object(i.jsx)(an.a.Metadata,{children:Object(i.jsx)("div",{children:Object(on.a)(e.createdAt,new Date)})}),Object(i.jsx)(an.a.Text,{children:e.body})]})]},e.id)})),Object(i.jsx)(at.b,{onSubmit:a,render:function(e){var t=e.handleSubmit,n=e.submitting,r=e.form;return Object(i.jsxs)(ot.a,{onSubmit:function(){t().then((function(){return r.reset()}))},children:[Object(i.jsx)(at.a,{name:"body",component:Vt,rows:2,placeholder:"Add your comment"}),Object(i.jsx)(l.a,{content:"Add Reply",labelPosition:"left",icon:"edit",primary:!0,loading:n})]})}})]})})]})})),sn=Object(j.a)((function(e){var t=e.attendees;return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsxs)(nt.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal",children:[t.length," ",1===t.length?"Person":"People"," Going"]}),Object(i.jsx)(nt.a,{attached:!0,children:Object(i.jsx)(yt.a,{relaxed:!0,divided:!0,children:t.map((function(e){return Object(i.jsxs)(Ct.a,{style:{position:"relative"},children:[e.isHost&&Object(i.jsx)(lt.a,{style:{position:"absolute"},color:"orange",ribbon:"right",children:"Host"}),Object(i.jsx)(u.a,{size:"tiny",src:e.image||"/assets/user.png"}),Object(i.jsxs)(Ct.a.Content,{verticalAlign:"middle",children:[Object(i.jsx)(Ct.a.Header,{as:"h3",children:Object(i.jsx)(d.a,{to:"/profile/".concat(e.username),children:e.displayName})}),e.following&&Object(i.jsx)(Ct.a.Extra,{style:{color:"orange"},children:"Following"})]})]},e.username)}))})})]})})),ln=Object(j.a)((function(e){var t=e.match,n=Object(r.useContext)($e).activityStore,a=n.activity,o=n.loadActivity,c=n.loadingInitial;return Object(r.useEffect)((function(){o(t.params.id)}),[o,t.params.id]),c?Object(i.jsx)(Zt,{content:"Loading activity..."}):a?Object(i.jsxs)(xt.a,{children:[Object(i.jsxs)(Gt.a,{width:10,children:[Object(i.jsx)(tn,{activity:a}),Object(i.jsx)(nn,{activity:a}),Object(i.jsx)(cn,{})]}),Object(i.jsx)(Gt.a,{width:6,children:Object(i.jsx)(sn,{attendees:a.attendees})})]}):Object(i.jsx)("h2",{children:"Activity not found"})})),un=function(){return Object(i.jsxs)(nt.a,{placeholder:!0,children:[Object(i.jsxs)(it.a,{icon:!0,children:[Object(i.jsx)(kt.a,{name:"search"}),"Oops - we've looked everywhere but couldn't find this."]}),Object(i.jsx)(nt.a.Inline,{children:Object(i.jsx)(l.a,{as:d.a,to:"/activities",primary:!0,children:"Return to Activities page"})})]})},bn=n(625),jn=Object(j.a)((function(){var e=Object(r.useContext)($e).modalStore,t=e.modal,n=t.open,a=t.body,o=e.closeModal,c=e.openModal;return Object(i.jsx)(bn.a,{onClose:o,onOpen:c,open:n,size:"mini",children:Object(i.jsx)(bn.a.Content,{children:a})})})),dn=n(631),hn=n(618),pn=n(636),On=Object(j.a)((function(e){var t=e.profile,n=e.follow,r=e.unfollow,a=e.isCurrentUser,o=e.loading;return Object(i.jsx)(nt.a,{children:Object(i.jsxs)(xt.a,{children:[Object(i.jsx)(xt.a.Column,{width:12,children:Object(i.jsx)(Ct.a.Group,{children:Object(i.jsxs)(Ct.a,{children:[Object(i.jsx)(Ct.a.Image,{avatar:!0,size:"small",src:(null===t||void 0===t?void 0:t.image)||"/assets/user.png"}),Object(i.jsx)(Ct.a.Content,{verticalAlign:"middle",children:Object(i.jsx)(it.a,{as:"h1",children:null===t||void 0===t?void 0:t.displayName})})]})})}),Object(i.jsxs)(xt.a.Column,{width:4,children:[Object(i.jsxs)(dn.a.Group,{widths:2,children:[Object(i.jsx)(dn.a,{label:"Followers",value:null===t||void 0===t?void 0:t.followersCount}),Object(i.jsx)(dn.a,{label:"Following",value:null===t||void 0===t?void 0:t.followingCount})]}),Object(i.jsx)(hn.a,{}),!a&&Object(i.jsxs)(pn.a,{animated:"move",children:[Object(i.jsx)(pn.a.Content,{visible:!0,style:{width:"100%"},children:Object(i.jsx)(l.a,{fluid:!0,color:"teal",content:(null===t||void 0===t?void 0:t.following)?"Following":"Not following"})}),Object(i.jsx)(pn.a.Content,{hidden:!0,children:Object(i.jsx)(l.a,{loading:o,fluid:!0,basic:!0,color:(null===t||void 0===t?void 0:t.following)?"red":"green",content:(null===t||void 0===t?void 0:t.following)?"Unfollow":"Follow",onClick:(null===t||void 0===t?void 0:t.following)?function(){return r(t.userName)}:function(){return n(t.userName)}})})]})]})]})})})),fn=n(637),mn=n(627),gn=n(323),vn=n(335),xn={border:"dashed 3px",borderColor:"#eee",borderRadius:"5px",paddingTop:"30px",textAlign:"center",height:"200px"},yn={borderColor:"green"},wn=function(e){var t=e.setFiles,n=Object(r.useCallback)((function(e){t(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}),[t]),a=Object(vn.a)({onDrop:n}),o=a.getRootProps,c=a.getInputProps,s=a.isDragActive;return Object(i.jsxs)("div",Object(ct.a)(Object(ct.a)({},o()),{},{style:s?Object(ct.a)(Object(ct.a)({},xn),yn):xn,children:[Object(i.jsx)("input",Object(ct.a)({},c())),Object(i.jsx)(kt.a,{name:"upload",size:"huge"}),Object(i.jsx)(it.a,{content:"Drop image here"})]}))},Cn=(n(564),n(330));function Sn(e){var t=e.imagePreview,n=e.setCropper;return Object(i.jsx)(Cn.a,{src:t,style:{height:200,width:"100%"},initialAspectRatio:1,aspectRatio:1,preview:".img-preview",guides:!1,viewMode:1,autoCropArea:1,background:!1,onInitialized:function(e){return n(e)}})}var kn=function(e){var t=e.loading,n=e.uploadPhoto,a=e.setAddPhotoMode,o=Object(r.useState)([]),c=Object(vt.a)(o,2),s=c[0],u=c[1],b=Object(r.useState)(),j=Object(vt.a)(b,2),d=j[0],h=j[1];return Object(r.useEffect)((function(){return function(){s.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[s]),Object(i.jsx)(r.Fragment,{children:Object(i.jsxs)(xt.a,{children:[Object(i.jsx)(xt.a.Row,{}),Object(i.jsxs)(xt.a.Column,{width:4,children:[Object(i.jsx)(it.a,{color:"teal",sub:!0,content:"Step 1 - Add Photo"}),Object(i.jsx)(wn,{setFiles:u})]}),Object(i.jsx)(xt.a.Column,{width:1}),Object(i.jsxs)(xt.a.Column,{width:4,children:[Object(i.jsx)(it.a,{sub:!0,color:"teal",content:"Step 2 - Resize image"}),s.length>0&&Object(i.jsx)(Sn,{setCropper:h,imagePreview:s[0].preview})]}),Object(i.jsx)(xt.a.Column,{width:1}),Object(i.jsxs)(xt.a.Column,{width:4,children:[Object(i.jsx)(it.a,{sub:!0,color:"teal",content:"Step 3 - Preview & Upload"}),s&&s.length>0&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"img-preview",style:{minHeight:200,overflow:"hidden"}}),Object(i.jsxs)(l.a.Group,{children:[Object(i.jsx)(l.a,{onClick:function(){d&&d.getCroppedCanvas().toBlob((function(e){e&&(n(e),u([]),a(!1))}))},positive:!0,icon:"check",loading:t}),Object(i.jsx)(l.a,{onClick:function(){return u([])},icon:"close"})]})]})]})]})})},Pn=(Object(j.a)(kn),Object(j.a)((function(){var e=Object(r.useContext)($e).profileStore,t=e.profile,n=e.isCurrentUser,a=e.uploadPhoto,o=e.uploadingPhoto,c=e.setMainPhoto,s=e.loading,b=e.deletePhoto,j=Object(r.useState)(!1),d=Object(vt.a)(j,2),h=d[0],p=d[1],O=Object(r.useState)(void 0),f=Object(vt.a)(O,2),m=f[0],g=f[1],v=Object(r.useState)(void 0),x=Object(vt.a)(v,2),y=x[0],w=x[1];return Object(i.jsx)(fn.a.Pane,{children:Object(i.jsxs)(xt.a,{children:[Object(i.jsxs)(xt.a.Column,{width:16,style:{paddingBottom:0},children:[Object(i.jsx)(it.a,{floated:"left",icon:"image",content:"Photos"}),n&&Object(i.jsx)(l.a,{floated:"right",basic:!0,content:h?"Cancel":"Add Photo",onClick:function(){return p(!h)}})]}),Object(i.jsx)(xt.a.Column,{width:16,children:h?Object(i.jsx)(kn,{uploadPhoto:a,loading:o,setAddPhotoMode:p}):Object(i.jsx)(mn.a.Group,{itemsPerRow:5,children:t&&t.photos.map((function(e){return Object(i.jsxs)(mn.a,{children:[Object(i.jsx)(u.a,{src:e.url}),n&&Object(i.jsxs)(gn.a,{fluid:!0,widths:2,children:[Object(i.jsx)(l.a,{name:e.id,id:e.id,onClick:function(t){c(e),g(t.currentTarget.name)},basic:!0,positive:!0,content:"Main",loading:s&&m===e.id,disabled:e.isMain}),Object(i.jsx)(l.a,{name:e.id,id:e.id,onClick:function(t){b(e),w(t.currentTarget.name)},basic:!0,negative:!0,icon:"trash",loading:s&&y===e.id,disabled:e.isMain})]})]},e.id)}))})})]})})}))),An=Object(jt.combineValidators)({displayname:Object(jt.isRequired)({message:"Display name"})}),zn=Object(j.a)((function(){var e=Object(r.useContext)($e).profileStore,t=e.profile,n=e.isCurrentUser,a=e.updateProfile,o=e.loadingProfile,c=Object(r.useState)(!1),s=Object(vt.a)(c,2),u=s[0],b=s[1];return Object(i.jsx)(fn.a.Pane,{children:Object(i.jsxs)(xt.a,{children:[Object(i.jsxs)(xt.a.Column,{width:16,style:{paddingBottom:0},children:[Object(i.jsx)(it.a,{floated:"left",icon:"user"}),n&&Object(i.jsx)(l.a,{floated:"right",basic:!0,content:u?"Cancel":"Edit",onClick:function(){return b(!u)},fo:!0}),!u&&Object(i.jsxs)(mn.a,{fluid:!0,children:[Object(i.jsx)(mn.a.Content,{header:"About "+(null===t||void 0===t?void 0:t.displayName)}),Object(i.jsx)(mn.a.Content,{description:null===t||void 0===t?void 0:t.bio})]})]}),Object(i.jsx)(xt.a.Column,{width:16,children:u&&Object(i.jsx)(at.b,{initialValues:t,validate:An,onSubmit:function(e){return a(e).then((function(){b(!1)})).catch((function(e){return Object(rt.a)({},bt.a,e)}))},render:function(e){var n=e.handleSubmit,r=e.submitting,a=(e.form,e.submitError),c=e.invalid,s=e.pristine,u=e.dirtySinceLastSubmit;return Object(i.jsxs)(ot.a,{onSubmit:n,error:!0,children:[Object(i.jsx)(at.a,{name:"displayname",component:ut,placeholder:"Display Name",value:t.displayName,initialValue:t.displayName}),Object(i.jsx)(at.a,{name:"bio",component:Vt,placeholder:"Bio",value:t.bio}),a&&!u&&Object(i.jsx)(ht,{error:a}),Object(i.jsx)(l.a,{disabled:c&&!u||s,loading:r||o,positive:!0,content:"Update",floated:"right",type:"submit"})]})}})})]})})})),In=Object(j.a)((function(e){var t=e.profile;return Object(i.jsxs)(mn.a,{as:d.a,to:"/profile/".concat(t.userName),children:[Object(i.jsx)(u.a,{src:t.image||"/assets/user.png"}),Object(i.jsx)(mn.a.Content,{children:Object(i.jsx)(mn.a.Header,{children:t.displayName})}),Object(i.jsx)(mn.a.Content,{extra:!0,children:Object(i.jsxs)("div",{children:[Object(i.jsx)(kt.a,{name:"user"}),t.followersCount," Followers"]})})]})})),Rn=Object(j.a)((function(){var e=Object(r.useContext)($e).profileStore,t=e.profile,n=e.loading,a=e.followings,o=e.activeTab;return Object(i.jsx)(fn.a.Pane,{loading:n,children:Object(i.jsxs)(xt.a,{children:[Object(i.jsx)(xt.a.Column,{width:16,children:Object(i.jsx)(it.a,{floated:"left",icon:"user",content:3===o?"People following ".concat(t.displayName):"People ".concat(t.displayName," is following")})}),Object(i.jsx)(xt.a.Column,{width:16,children:Object(i.jsx)(mn.a.Group,{itemsPerRow:5,children:a.map((function(e){return Object(i.jsx)(In,{profile:e},e.userName)}))})})]})})})),Mn=[{menuItem:"Future Events",pane:{key:"futureEvents"}},{menuItem:"Past Events",pane:{key:"pastEvents"}},{menuItem:"Hosting",pane:{key:"hosted"}}],Fn=Object(j.a)((function(){var e=Object(r.useContext)($e).profileStore,t=e.loadUserActivities,n=e.profile,a=e.loadingActivities,o=e.userActivities;Object(r.useEffect)((function(){t(n.userName)}),[t,n]);return Object(i.jsx)(fn.a.Pane,{loading:a,children:Object(i.jsxs)(xt.a,{children:[Object(i.jsx)(xt.a.Column,{width:16,children:Object(i.jsx)(it.a,{floated:"left",icon:"calendar",content:"Activities"})}),Object(i.jsxs)(xt.a.Column,{width:16,children:[Object(i.jsx)(fn.a,{panes:Mn,menu:{secondary:!0,pointing:!0},onTabChange:function(e,i){return function(e,i){var r;switch(i.activeIndex){case 1:r="past";break;case 2:r="hosting";break;default:r="future"}t(n.userName,r)}(0,i)}}),Object(i.jsx)("br",{}),Object(i.jsx)(mn.a.Group,{itemsPerRow:4,children:o.map((function(e){return Object(i.jsxs)(mn.a,{as:d.a,to:"/activities/".concat(e.id),children:[Object(i.jsx)(u.a,{src:"/assets/categoryImages/".concat(e.category,".jpg"),style:{minHeight:100,objectFit:"cover"}}),Object(i.jsxs)(mn.a.Content,{children:[Object(i.jsx)(mn.a.Header,{textAlign:"center",children:e.title}),Object(i.jsxs)(mn.a.Meta,{textAlign:"center",children:[Object(i.jsx)("div",{children:Object(Pt.a)(new Date(e.date),"do LLL")}),Object(i.jsx)("div",{children:Object(Pt.a)(new Date(e.date),"h:mm a")})]})]})]},e.id)}))})]})]})})})),Dn=[{menuItem:"About",render:function(){return Object(i.jsx)(zn,{})}},{menuItem:"Photos",render:function(){return Object(i.jsx)(Pn,{})}},{menuItem:"Activities",render:function(){return Object(i.jsx)(Fn,{})}},{menuItem:"Followers",render:function(){return Object(i.jsx)(Rn,{})}},{menuItem:"Following",render:function(){return Object(i.jsx)(Rn,{})}}],Ln=function(e){var t=e.setActiveTab;return Object(i.jsx)(fn.a,{menu:{fluid:!0,vertical:!0},menuPosition:"right",panes:Dn,onTabChange:function(e,n){return t(n.activeIndex)}})},Tn=Object(j.a)((function(e){var t=e.match,n=Object(r.useContext)($e),a=n.profileStore,o=a.loadingProfile,c=a.profile,s=a.loadProfile,l=a.follow,u=a.unfollow,b=a.isCurrentUser,j=a.loading,d=a.setActiveTab,h=n.userStore.user;return Object(r.useEffect)((function(){s(t.params.username||h.userName)}),[s,t,h]),o?Object(i.jsx)(Zt,{content:"Loading profile..."}):Object(i.jsx)(xt.a,{children:Object(i.jsxs)(xt.a.Column,{width:16,children:[Object(i.jsx)(On,{profile:c,follow:l,unfollow:u,isCurrentUser:b,loading:j}),Object(i.jsx)(Ln,{setActiveTab:d})]})})})),Nn=Object(j.a)((function(e){var t=e.component,n=Object(Ut.a)(e,["component"]),a=Object(r.useContext)($e).userStore.isLoggedIn;return Object(i.jsx)(tt.b,Object(ct.a)(Object(ct.a)({},n),{},{render:function(e){return a?Object(i.jsx)(t,Object(ct.a)({},e)):Object(i.jsx)(tt.a,{to:"/"})}}))})),Hn=Object(tt.h)(Object(j.a)((function(e){var t=e.location,n=Object(r.useContext)($e),a=n.commonStore,o=a.setAppLoaded,s=a.token,l=a.appLoaded,u=n.userStore.getUser;return Object(r.useEffect)((function(){s?u().finally((function(){return o()})):o()}),[u,o,s]),l?Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(jn,{}),Object(i.jsx)(S.a,{position:"bottom-right"}),Object(i.jsx)(tt.b,{exact:!0,path:"/",component:gt}),Object(i.jsx)(tt.b,{path:"/(.+)",render:function(){return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(et,{}),Object(i.jsx)(c.a,{style:{marginTop:"7em"},children:Object(i.jsxs)(tt.d,{children:[Object(i.jsx)(Nn,{exact:!0,path:"/activities",component:Et}),Object(i.jsx)(Nn,{path:"/activities/:id",component:ln}),Object(i.jsx)(Nn,{path:["/createActivity","/manage/:id"],component:Qt},t.key),Object(i.jsx)(Nn,{path:"/profile/:username",component:Tn}),Object(i.jsx)(tt.b,{component:un})]})})]})}})]}):Object(i.jsx)(Zt,{content:"Loading app..."})}))),En=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,638)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),a(e),o(e)}))};function Un(){var e=Object(tt.g)().pathname;return Object(r.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var Gn=n(55),Bn=(n(565),n(566),n(332));n.n(Bn)()();var qn=Object(Gn.a)();o.a.render(Object(i.jsxs)(tt.c,{history:qn,children:[Object(i.jsx)(Un,{}),Object(i.jsx)(Hn,{})]}),document.getElementById("root")),En()}},[[596,1,2]]]);
//# sourceMappingURL=main.54964ca9.chunk.js.map